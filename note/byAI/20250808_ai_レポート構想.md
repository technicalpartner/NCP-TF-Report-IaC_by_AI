# 続編レポート構想（IaC × 生成AI：やさしい説明版）

この文書は、前のサマリーをもとに「生成AIを使ってTerraformのコードを作り、AWSに環境をつくる」手順を、やさしい言葉でまとめた計画書です。会社への導入計画やお金の話（投資対効果）は扱いません。

## 1. この文書でわかること

- どんな進め方で試すのか（5つのステップ）
- 人がやることとAIがやることの分け方（3つのケース）
- できたものをどう確認するか（完成の目安）

## 2. 想定する3つのケース（人とAIの役割）

ケースは、みなさんのスキルに合わせて選びます。どのケースでも、最終的にはAIがTerraformのコードを自動で作ります。

### ケース① AWSの設計技術 と Terraformのコーディング技術がある

- 人がすること（事前準備）
  - Terraformの「モジュール設計」を人が行います（どのフォルダーに何を置くか、役割の分け方など）。
- AIがすること
  - 人が作った設計に沿って、Terraformの実際のコードを自動生成します。
- できあがるもの
  - モジュール一式、設定ファイル、読み方の説明（README）。
- 確認ポイント
  - 設計どおりに分かれているか、セキュリティ上の問題がないか、`terraform plan/apply` が通るか。

### ケース② AWSの設計技術のみがある

- 人がすること（事前準備）
  - AWSのシステム構成図と詳細設計（どのサービスをどのように組み合わせるか）を用意します。
- AIがすること
  - 図と設計の内容をもとに、Terraformのコードを自動生成します。
- できあがるもの
  - ディレクトリ構成、主要なモジュール、接続や依存関係の設定。
- 確認ポイント
  - 図とコードが一致しているか、再生成しても大きく変わらないか、レビュー指摘がすぐ直るか。

### ケース③ AWSの基礎知識のみがある

- 人がすること（事前準備）
  - アプリのざっくりした形（例：WebとDBがある）を説明します。
  - 最低限のルールだけ決めます（名前の付け方、タグ、セキュリティの基本、使ってよい地域など）。
- AIがすること
  - 人と対話しながら、どのAWSサービスを選ぶかを一緒に決め、Terraformのコードを自動生成します。
- できあがるもの
  - はじめての人でも読める簡単な構成とコード。少しずつ作って、何度か直して完成を目指します。
- 確認ポイント
  - 間違ったサービス選びをしていないか、基本ルールを守れているか。必ず、人の目でチェックします。

## 3. 進め方（共通の5ステップ）

1) 設計する（またはAIと相談して決める）
- 目的、必要な機能、使うサービス、名前やタグのルールを決めます。

2) コードを作る（AIが中心）
- 事前に決めた内容を渡し、AIにTerraformコードを作ってもらいます。

3) チェックする（AI＋人）
- 機械的なチェック（自動ツール）と、人のレビューの両方を行います。

4) 実際に作る（AWSに反映）
- `terraform plan` → 問題なければ `terraform apply` を実行します。

5) 動かして確かめる
- 画面やログで、狙いどおり動いているかを確認します。問題があれば1)からやり直します。

## 4. 成功の判断基準（完了の目安）

- セキュリティ上の重大な指摘がない（自動チェックでも、人の目でもOK）。
- `terraform plan/apply` が通る。意図しない差分が出ない。
- 名前やタグなど、決めたルールを守れている。
- レビュー担当者が「採用OK」または「指摘を直したらOK」と判断する。

## 5. 使う道具（名前だけ知っていればOK）

- 開発用エディタ: Cursor（AIと話しながら書ける）
- 生成AIモデル: Claude 3.7 など（最新の良いものを選ぶ）
- 自動チェック: TFLint、tfsec、Checkov（セキュリティや書き方の間違いを見つける）
- ルールの自動確認: OPA/Conftest（タグや暗号化のルールを守れているか）
- 費用の見える化: Infracost（お金の目安）
- Terraformの状態管理: S3 + DynamoDB（同時編集の衝突を防ぐ）
- 自動実行（任意）: GitHub Actions（チェック→計画→適用の順で流す）

## 6. 安全に進めるための決まりごと（ガードレール）

- 必ずタグをつける（環境名、担当部門、システム名など）。
- データはできるだけ暗号化する（KMSを使う）。
- 権限は必要最小限にする（IAM）。
- 監査ログを残す（CloudTrail など）。
- ネットワークは公開/非公開を分ける（公開は最小限）。
- 機密情報をAIに渡さない（プロンプトに直接書かない）。

## 7. よくある失敗と対策

- Terraformの保管場所やロック設定を忘れる → 先にS3/DynamoDBの設定を固定してから始める。
- 依存関係の抜けや循環エラー → 小さく作って小まめに `plan` で確認。
- 権限が広すぎる/IAMが強すぎる → 最小権限で作り、足りないときにだけ追加。
- タグや命名ルールがバラバラ → ルールを最初に決め、AIにも伝える。

## 8. 結果の比べ方（3ケース横断）

- どれが一番早くできたか（作業時間・やり直し回数）。
- どれが一番わかりやすかったか（レビュー担当の感想）。
- セキュリティやルール違反が少なかったのはどれか（自動チェックの結果）。

## 9. 用語ミニ辞典（短く）

- Terraform: AWSの環境を“設計図（コード）”でつくるための道具。
- モジュール: Terraformの部品セット。あとで再利用しやすい形。
- `plan/apply`: 実行前の確認と、本番反映の操作。
- タグ: 誰が何のために作ったかを示すラベル。整理や費用集計に使う。

## 10. 範囲外のこと（この文書では扱いません）

- 社内展開のやり方、予算や投資効果の評価、組織ルールの変更など。

---

前のサマリーで得た気づき（AIで作業が早くなる、学習には良いが丸投げは危険、手順をそろえると良い）を前提に、だれでも試しやすい形に直しました。上の計画にそって実験し、結果と学びをまとめていきます。


