# 6. 実施結果 ケース② AWSの設計技術がある場合

ケース②は作業者がAWSの設計技術はあるが、Terraformのコーディングは未経験、または一部不安がある場合を想定する。  
作業者はAWSのシステム構成と、AWS上に作成するリソースの設定を記載した設計書を作成し、生成AIにTerraformのコードを生成させる。

#### 作業者の作成する設計書

- (1) システム構成図  
      AWSのシステム構成図。
- (2) 基本設計書  
      システム構成図に記載したリソースの説明を記載する。システム内の役割やシステム構成図から読み取ることが困難な設定を記載する。
- (3) 詳細設計書  
      AWSリソースの詳細な設定を記載する。基本設計では記載していないパラメータなどを明示する。
- (4) Terraform設計書  
      Terraformコードのディレクトリ構造などコーディングのルールを指定する。

#### 想定手順

- (1) AWS環境の設計書を作成する。
- (2) 生成AIにTerraformのコードを生成させる。
- (3) 生成されたTerraformコードを実行してAWSの環境を作成する。コードの実行でエラーが発生した場合は手順(1)の設計書を修正する。  
- (4) 作業者がAWS上に作成された環境を確認する。意図した環境が作成されない場合は手順(1)の設計書を修正して生成AIによるTerraformコードの生成を再実施する。
- (5) 作業者によるAWS環境のチェックに合格するまで手順(2)から手順(4)を繰り返す。


### 6.2.2. 作業内容と作業時間

#### (1) 設計書の記載内容、形式

#### 作業者の作業内容と所要時間

|作業内容|作業時間|
|------|------|
|AWS設計   |12時間|
|Terraformコーディングルール| 2時間|

#### 生成AIの作業内容と所要時間

|作業内容|作業時間|
|------|------|
|設計書レビュー|0.5時間|
|コード生成|0.5時間|
|コードレビュー|0.5時間|

## 6.3. 課題

### Terraform設計書の共通化

Terraformモジュール設計書にTerraformコードで作成する全てのAWSリソースを記載した。

#### Terraformモジュール設計書の効果と課題

##### (1) 効果

- 生成するTerraformコードの細部まで指定するため、意図したとおりのTerraformコードを生成することができる。
- リソース間の相関を図で記載するため、リソースの関係を理解しやすい。

##### (2) 課題

- Terraformモジュール設計書の作成のためにコーディングと同等の作業時間が必要になる。
- 変更管理が行いづらい。
  検証の開始当初はリソース間の依存関係をテキストデータで表現するためER図や、UMLのクラス図、オブジェクト図などを使用することを検討した。
  Terraformのリソースとリソースの相関を的確に表現できる記法が見つからなかったため、独自機能の図を作成することとした。
  Terraformモジュール設計書はExcelの図で作成して、Cursorに生成を指示するときにはExcelから画像を作成して入力としている。
  Excelと画像を使用しているためテキストデータに比べて変更の差分が確認しづらくなる。
  テキストデータで作成する方法を見つけたい。

- 作成するAWSのリソースの設定を指示することに比べてTerraformモジュール設計書の記載内容が複雑になる。

#### 総括

ケース①ではTerraformモジュール設計書を作成することによって作成者の意図した通りのTerraformコードを作成することができた。
一方で、作成するAWSリソースの設定を的確に指定するためには作業時間が大きくなり、コーディングと比べてメリットがあまりないとも感じる。
ケース②では作成するAWSリソースが的確に作成するための最低限の情報を指示する方法を模索する。
